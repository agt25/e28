<!doctype html>
<html lang='en'>

    <head>
        <title>Stonks</title>
        <meta charset='utf-8'>
        <link href="data:," rel="icon">
        <link href='style.css' rel='stylesheet'>
        <!-- Font Awesome -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet"/>
        <!-- Google Fonts -->
        <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"/>
        <!-- MDB -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.3.0/mdb.min.css"
            rel="stylesheet"/>
        <!-- Bootstrap -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
            crossorigin="anonymous">

        <!-- Vue -->
        <script src='https://unpkg.com/vue@next' defer="defer"></script>
        <!-- Lodash -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.14.1/lodash.min.js"></script>

        <script src='script.js' defer="defer"></script>

    </head>

    <body>

        <div id='app' v-cloak="v-cloak">

            <!-- Render on first load; Ask user for their name -->
            <div v-if='!userName' class='welcome-container'>
                <div class='welcome-item'>
                    <h2>Welcome</h2>
                    <h3>Please
                        <!-- CSS 'enter' key from CodePen -->
                        <span class="keyboard">
                            <span class="keyboard__row keyboard__row--h1">
                                <span class="key--bottom-right key--word key--w5" data-key="13">
                                    <span>enter</span>
                                </span>
                            </span>
                        </span>
                        your name....</h3>
                    <!-- Save the entered username as well as the user -->
                    <input
                        v-model.lazy.trim='userName'
                        placeholder='Your name...'
                        v-on:change="newUsers()"/>

                </div>
            </div>

            <!-- If user has inputted their name, render the game -->
            <div v-if='userName' class='game'>
                <!-- Header / Logo -->
                <header class='flex-jumbo'>
                    <!-- <div class='flex-items'></div> -->
                </header>

                <!-- Main Component of the Game -->
                <div class="container-fluid" id='stock-choices'>

                    <div class='top-stats-wrap'>

                        <!-- Show basic stats like current player and current round -->
                        <div v-if='activePlayer' v-bind:value='activePlayer' class='top-stats-item'>
                            Playing:
                            {{ activePlayer.name }}
                        </div>
                        <div v-bind:value='gameRound' class='top-stats-item'>
                            Round #
                            {{ gameRound }}
                        </div>
                        <div class='top-stats-item'>
                            <button v-on:click='resetGame' id='reset'>Reset</button>
                        </div>

                    </div>

                    <!-- Display six random mystery stocks at a time -->
                    <div class="row justify-content-md-center">

                        <div
                            v-for="stock in displayedStocks"
                            v-bind:key="stock.id"
                            class="col-6 col-md-4">

                            <img id='case' src='/images/case.png'>
                            <button
                                id="stock"
                                ref="submitStock"
                                v-bind:value="stock.name"
                                v-bind:key='stock.name'
                                v-bind:class="{disabled : disabled}"
                                v-on:click="stockReturn(stock), selectedStock = stock.name">

                                {{stock.name}}
                            </button>

                        </div>

                    </div>

                    <!-- If user has selected a stock, show basic stats -->
                    <div v-if='selected'>

                        <br>
                        <span>
                            Networth:
                            {{ formatPrice(todayWorth) }}</span>
                        <br>
                        <span v-bind:class="{ won: won, lost: !won}">{{ displayMessage }}</span>
                        <br>
                        <span v-bind:value='activePlayer' class='shadow-3'>
                            {{ activePlayer.name }}
                            invested in
                            {{ activePlayer.lastStock }}
                            <span v-bind:class="{ won: won, lost: !won}">
                                {{ activePlayer.lastChange }}

                            </span>
                        </span>
                        <br>

                    </div>

                    <div v-if='!selected'>
                        It's 2009.
                        <br>
                        Select a mystery stock to invest $10,000 in.
                        <br>
                        Find out how much you'll have made or lost today.
                        <div>The computer selects after you.</div>
                        <br>
                        Repeat until you're worth at least $3,000,000.
                        <br>
                        Whoever hits the networth target first wins the game!
                    </div>
                </div>

            </div>

            <button v-if='userName' v-on:click="show = !show">
                Game Log
            </button>

            <div v-if='show'>
                <!-- User Score Card -->
                <div v-if='gameStarted' class='stats-flex'>
                    <span v-bind:value='players' v-for='player in players' class='stats-item'>
                        {{ player.name }}
                        <span class='count-item win'>
                            {{ player.won }}
                        </span>
                        <span class='count-item loss'>
                            {{ player.lost }}
                        </span>
                    </span>
                </div>

                <!-- Rounds History -->
                <div v-for='round in rounds' class='history-wrapper'>
                    <div class='history-item'>
                        Round:
                        {{ round.round }}
                        <br>
                        Player:
                        {{ round.player }}
                        {{ round.result }}
                        {{ formatPrice(round.change) }}
                        by investing in
                        {{ round.stock }}
                        <br>
                        Networth:
                        {{ formatPrice(round.networth) }}
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

</div>

</body>
</html>